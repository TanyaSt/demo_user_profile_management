{"ast":null,"code":"var _jsxFileName = \"D:\\\\My\\\\Projects\\\\#_React\\\\demo_user_profile_management\\\\src\\\\context\\\\AppContextProvider.js\";\nimport React from 'react';\nimport { AppContext } from './app-context';\nimport Storage from \"../services/store\";\nimport Api from \"../services/api\";\nimport Loader from \"../components/loader/Loader\";\nimport { withRouter } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass AppContextProvider extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      contacts: [],\n      isLoading: true,\n      token: null\n    };\n    this.addContact = contact => {\n      this.setState({\n        isLoading: true\n      });\n      Storage.addContact(contact).then(() => {\n        const arr = [...this.state.contacts, contact];\n        this.setState({\n          isLoading: false,\n          contacts: [...arr]\n        });\n        this.props.history.push(\"/\");\n      }).catch(error => {\n        this.setState({\n          isLoading: false\n        });\n      });\n    };\n  }\n  componentDidMount() {\n    const token = Storage.getToken();\n    if (token) {\n      Api.getAllContacts(token).then(response => {\n        console.log(response);\n        this.setState({\n          isLoading: false,\n          contacts: response.data.contacts,\n          token\n        });\n      }).catch(error => {\n        this.setState({\n          isLoading: false,\n          token\n        });\n      });\n    } else {\n      this.setState({\n        isLoading: false\n      });\n    }\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(AppContext.Provider, {\n      value: {\n        contacts: this.state.contacts,\n        addContact: this.addContact\n      },\n      children: [this.props.children, this.state.isLoading && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 42\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this);\n  }\n}\nexport default _c = withRouter(AppContextProvider);\nvar _c;\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"names":["React","AppContext","Storage","Api","Loader","withRouter","AppContextProvider","Component","state","contacts","isLoading","token","addContact","contact","setState","then","arr","props","history","push","catch","error","componentDidMount","getToken","getAllContacts","response","console","log","data","render","children"],"sources":["D:/My/Projects/#_React/demo_user_profile_management/src/context/AppContextProvider.js"],"sourcesContent":["import React from 'react';\r\nimport {AppContext} from './app-context';\r\nimport Storage from \"../services/store\";\r\nimport Api from \"../services/api\";\r\nimport Loader from \"../components/loader/Loader\";\r\nimport {withRouter} from 'react-router-dom';\r\n\r\nclass AppContextProvider extends React.Component{\r\n    state = {\r\n        contacts:[],\r\n        isLoading:true,\r\n        token:null\r\n    }\r\n\r\n    componentDidMount() {\r\n        const token = Storage.getToken();\r\n        if(token){\r\n            Api.getAllContacts(token)\r\n                .then(response => {\r\n                    console.log(response);\r\n                    this.setState({\r\n                        isLoading:false,\r\n                        contacts:response.data.contacts,\r\n                        token\r\n                    });\r\n                }).catch(error => {\r\n                this.setState({\r\n                    isLoading:false,\r\n                    token\r\n                });\r\n            });\r\n        }else{\r\n            this.setState({isLoading:false});\r\n        }\r\n    }\r\n\r\n    addContact = contact => {\r\n        this.setState({isLoading:true});\r\n        Storage.addContact(contact).then(()=>{\r\n            const arr = [...this.state.contacts,contact];\r\n            this.setState({\r\n                isLoading:false,\r\n                contacts: [...arr]\r\n            });\r\n            this.props.history.push(\"/\");\r\n        }).catch(error => {\r\n            this.setState({isLoading:false});\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <AppContext.Provider value={{\r\n                contacts:this.state.contacts,\r\n                addContact:this.addContact\r\n            }}>\r\n                {this.props.children}\r\n                {this.state.isLoading && <Loader/>}\r\n            </AppContext.Provider>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(AppContextProvider);"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAAQC,UAAU,QAAO,eAAe;AACxC,OAAOC,OAAO,MAAM,mBAAmB;AACvC,OAAOC,GAAG,MAAM,iBAAiB;AACjC,OAAOC,MAAM,MAAM,6BAA6B;AAChD,SAAQC,UAAU,QAAO,kBAAkB;AAAC;AAE5C,MAAMC,kBAAkB,SAASN,KAAK,CAACO,SAAS;EAAA;IAAA;IAAA,KAC5CC,KAAK,GAAG;MACJC,QAAQ,EAAC,EAAE;MACXC,SAAS,EAAC,IAAI;MACdC,KAAK,EAAC;IACV,CAAC;IAAA,KAwBDC,UAAU,GAAGC,OAAO,IAAI;MACpB,IAAI,CAACC,QAAQ,CAAC;QAACJ,SAAS,EAAC;MAAI,CAAC,CAAC;MAC/BR,OAAO,CAACU,UAAU,CAACC,OAAO,CAAC,CAACE,IAAI,CAAC,MAAI;QACjC,MAAMC,GAAG,GAAG,CAAC,GAAG,IAAI,CAACR,KAAK,CAACC,QAAQ,EAACI,OAAO,CAAC;QAC5C,IAAI,CAACC,QAAQ,CAAC;UACVJ,SAAS,EAAC,KAAK;UACfD,QAAQ,EAAE,CAAC,GAAGO,GAAG;QACrB,CAAC,CAAC;QACF,IAAI,CAACC,KAAK,CAACC,OAAO,CAACC,IAAI,CAAC,GAAG,CAAC;MAChC,CAAC,CAAC,CAACC,KAAK,CAACC,KAAK,IAAI;QACd,IAAI,CAACP,QAAQ,CAAC;UAACJ,SAAS,EAAC;QAAK,CAAC,CAAC;MACpC,CAAC,CAAC;IACN,CAAC;EAAA;EAlCDY,iBAAiB,GAAG;IAChB,MAAMX,KAAK,GAAGT,OAAO,CAACqB,QAAQ,EAAE;IAChC,IAAGZ,KAAK,EAAC;MACLR,GAAG,CAACqB,cAAc,CAACb,KAAK,CAAC,CACpBI,IAAI,CAACU,QAAQ,IAAI;QACdC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;QACrB,IAAI,CAACX,QAAQ,CAAC;UACVJ,SAAS,EAAC,KAAK;UACfD,QAAQ,EAACgB,QAAQ,CAACG,IAAI,CAACnB,QAAQ;UAC/BE;QACJ,CAAC,CAAC;MACN,CAAC,CAAC,CAACS,KAAK,CAACC,KAAK,IAAI;QAClB,IAAI,CAACP,QAAQ,CAAC;UACVJ,SAAS,EAAC,KAAK;UACfC;QACJ,CAAC,CAAC;MACN,CAAC,CAAC;IACN,CAAC,MAAI;MACD,IAAI,CAACG,QAAQ,CAAC;QAACJ,SAAS,EAAC;MAAK,CAAC,CAAC;IACpC;EACJ;EAgBAmB,MAAM,GAAG;IACL,oBACI,QAAC,UAAU,CAAC,QAAQ;MAAC,KAAK,EAAE;QACxBpB,QAAQ,EAAC,IAAI,CAACD,KAAK,CAACC,QAAQ;QAC5BG,UAAU,EAAC,IAAI,CAACA;MACpB,CAAE;MAAA,WACG,IAAI,CAACK,KAAK,CAACa,QAAQ,EACnB,IAAI,CAACtB,KAAK,CAACE,SAAS,iBAAI,QAAC,MAAM;QAAA;QAAA;QAAA;MAAA,QAAE;IAAA;MAAA;MAAA;MAAA;IAAA,QAChB;EAE9B;AACJ;AAEA,oBAAeL,UAAU,CAACC,kBAAkB,CAAC;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}