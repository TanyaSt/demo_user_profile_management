{"ast":null,"code":"import _toConsumableArray from\"D:/My/Projects/#_React/demo_user_profile_management/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _classCallCheck from\"D:/My/Projects/#_React/demo_user_profile_management/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/My/Projects/#_React/demo_user_profile_management/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"D:/My/Projects/#_React/demo_user_profile_management/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/My/Projects/#_React/demo_user_profile_management/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import{AppContext}from'./app-context';import Storage from\"../services/store\";import Api from\"../services/api\";import Loader from\"../components/loader/Loader\";import{withRouter}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AppContextProvider=/*#__PURE__*/function(_React$Component){_inherits(AppContextProvider,_React$Component);var _super=_createSuper(AppContextProvider);function AppContextProvider(){var _this;_classCallCheck(this,AppContextProvider);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={contacts:[],isLoading:true,token:null};_this.addContact=function(contact){_this.setState({isLoading:true});Storage.addContact(contact).then(function(){var arr=[].concat(_toConsumableArray(_this.state.contacts),[contact]);_this.setState({isLoading:false,contacts:_toConsumableArray(arr)});_this.props.history.push(\"/\");}).catch(function(error){_this.setState({isLoading:false});});};return _this;}_createClass(AppContextProvider,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var token=Storage.getToken();if(token){Api.getAllContacts(token).then(function(response){console.log(response);_this2.setState({isLoading:false,contacts:response.data.contacts,token:token});}).catch(function(error){_this2.setState({isLoading:false,token:token});});}else{this.setState({isLoading:false});}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(AppContext.Provider,{value:{contacts:this.state.contacts,addContact:this.addContact},children:[this.props.children,this.state.isLoading&&/*#__PURE__*/_jsx(Loader,{})]});}}]);return AppContextProvider;}(React.Component);export default withRouter(AppContextProvider);","map":{"version":3,"names":["React","AppContext","Storage","Api","Loader","withRouter","AppContextProvider","state","contacts","isLoading","token","addContact","contact","setState","then","arr","props","history","push","catch","error","getToken","getAllContacts","response","console","log","data","children","Component"],"sources":["D:/My/Projects/#_React/demo_user_profile_management/src/context/AppContextProvider.js"],"sourcesContent":["import React from 'react';\r\nimport {AppContext} from './app-context';\r\nimport Storage from \"../services/store\";\r\nimport Api from \"../services/api\";\r\nimport Loader from \"../components/loader/Loader\";\r\nimport {withRouter} from 'react-router-dom';\r\n\r\nclass AppContextProvider extends React.Component{\r\n    state = {\r\n        contacts:[],\r\n        isLoading:true,\r\n        token:null\r\n    }\r\n\r\n    componentDidMount() {\r\n        const token = Storage.getToken();\r\n        if(token){\r\n            Api.getAllContacts(token)\r\n                .then(response => {\r\n                    console.log(response);\r\n                    this.setState({\r\n                        isLoading:false,\r\n                        contacts:response.data.contacts,\r\n                        token\r\n                    });\r\n                }).catch(error => {\r\n                this.setState({\r\n                    isLoading:false,\r\n                    token\r\n                });\r\n            });\r\n        }else{\r\n            this.setState({isLoading:false});\r\n        }\r\n    }\r\n\r\n    addContact = contact => {\r\n        this.setState({isLoading:true});\r\n        Storage.addContact(contact).then(()=>{\r\n            const arr = [...this.state.contacts,contact];\r\n            this.setState({\r\n                isLoading:false,\r\n                contacts: [...arr]\r\n            });\r\n            this.props.history.push(\"/\");\r\n        }).catch(error => {\r\n            this.setState({isLoading:false});\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <AppContext.Provider value={{\r\n                contacts:this.state.contacts,\r\n                addContact:this.addContact\r\n            }}>\r\n                {this.props.children}\r\n                {this.state.isLoading && <Loader/>}\r\n            </AppContext.Provider>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(AppContextProvider);"],"mappings":"qqBAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAAQC,UAAU,KAAO,eAAe,CACxC,MAAOC,QAAO,KAAM,mBAAmB,CACvC,MAAOC,IAAG,KAAM,iBAAiB,CACjC,MAAOC,OAAM,KAAM,6BAA6B,CAChD,OAAQC,UAAU,KAAO,kBAAkB,CAAC,2FAEtCC,mBAAkB,uXACpBC,KAAK,CAAG,CACJC,QAAQ,CAAC,EAAE,CACXC,SAAS,CAAC,IAAI,CACdC,KAAK,CAAC,IACV,CAAC,OAwBDC,UAAU,CAAG,SAAAC,OAAO,CAAI,CACpB,MAAKC,QAAQ,CAAC,CAACJ,SAAS,CAAC,IAAI,CAAC,CAAC,CAC/BP,OAAO,CAACS,UAAU,CAACC,OAAO,CAAC,CAACE,IAAI,CAAC,UAAI,CACjC,GAAMC,IAAG,8BAAO,MAAKR,KAAK,CAACC,QAAQ,GAACI,OAAO,EAAC,CAC5C,MAAKC,QAAQ,CAAC,CACVJ,SAAS,CAAC,KAAK,CACfD,QAAQ,oBAAMO,GAAG,CACrB,CAAC,CAAC,CACF,MAAKC,KAAK,CAACC,OAAO,CAACC,IAAI,CAAC,GAAG,CAAC,CAChC,CAAC,CAAC,CAACC,KAAK,CAAC,SAAAC,KAAK,CAAI,CACd,MAAKP,QAAQ,CAAC,CAACJ,SAAS,CAAC,KAAK,CAAC,CAAC,CACpC,CAAC,CAAC,CACN,CAAC,+EAlCD,4BAAoB,iBAChB,GAAMC,MAAK,CAAGR,OAAO,CAACmB,QAAQ,EAAE,CAChC,GAAGX,KAAK,CAAC,CACLP,GAAG,CAACmB,cAAc,CAACZ,KAAK,CAAC,CACpBI,IAAI,CAAC,SAAAS,QAAQ,CAAI,CACdC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC,CACrB,MAAI,CAACV,QAAQ,CAAC,CACVJ,SAAS,CAAC,KAAK,CACfD,QAAQ,CAACe,QAAQ,CAACG,IAAI,CAAClB,QAAQ,CAC/BE,KAAK,CAALA,KACJ,CAAC,CAAC,CACN,CAAC,CAAC,CAACS,KAAK,CAAC,SAAAC,KAAK,CAAI,CAClB,MAAI,CAACP,QAAQ,CAAC,CACVJ,SAAS,CAAC,KAAK,CACfC,KAAK,CAALA,KACJ,CAAC,CAAC,CACN,CAAC,CAAC,CACN,CAAC,IAAI,CACD,IAAI,CAACG,QAAQ,CAAC,CAACJ,SAAS,CAAC,KAAK,CAAC,CAAC,CACpC,CACJ,CAAC,sBAgBD,iBAAS,CACL,mBACI,MAAC,UAAU,CAAC,QAAQ,EAAC,KAAK,CAAE,CACxBD,QAAQ,CAAC,IAAI,CAACD,KAAK,CAACC,QAAQ,CAC5BG,UAAU,CAAC,IAAI,CAACA,UACpB,CAAE,WACG,IAAI,CAACK,KAAK,CAACW,QAAQ,CACnB,IAAI,CAACpB,KAAK,CAACE,SAAS,eAAI,KAAC,MAAM,IAAE,GAChB,CAE9B,CAAC,gCArD4BT,KAAK,CAAC4B,SAAS,EAwDhD,cAAevB,WAAU,CAACC,kBAAkB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}